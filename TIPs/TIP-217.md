| id | Title | Status | Author | Description | Discussions to | Created |
| ----------- | ----------- | ----------- | ----------- | ----------- | ----------- | ----------- |
| TIP-217 | Staked THALES as trading collateral | Draft | Igor (@1603thales) | Implement a solution that would allow THALES stakers to place positions on Overtime V2 with their staked THALES as collateral | https://discord.gg/thales | 2024-06-28


## Simple Summary 

Implement a solution that would allow THALES stakers to place positions on Overtime V2 with their staked THALES as collateral


## Abstract

The most locked liquidity of the Thales Protocol is in the THALES staking contract. This liquidity is mostly passive and serves as a way for token holders to align with the protocol, accrue governing power and tap into the rev share.

This TIP proposes a solution that would allow THALES stakers to place positions on Overtime V2 with their staked THALES tokens as collateral. This would allow passive stakers to activate their staked THALES for this use case with the potential to increase their staked THALES balance.

  

## Motivation

Following the success of [TIP 206](https://github.com/thales-markets/thales-improvement-proposals/blob/main/TIPs/TIP-206.md), which allowed the use of THALES as supported collateral for Overtime positioning, the next logical step is to unlock the significant capital currently used for staking and protocol rewards for positioning on Overtime V2.

Currently there is $5.8 million of inactive THALES staked that could be used on the platform. With 24.5 million THALES tokens staked, this represents 44% of the circulating supply of THALES that could be utilized. 
  
Since the implementation of V2 and [TIP 206](https://github.com/thales-markets/thales-improvement-proposals/blob/main/TIPs/TIP-206.md), approximately [50% of Overtime V2 volume is generated by users positioning with Thales.](https://dune.com/queries/3867894/6507234) Unlocking additional THALES will allow stakers to use idle capital, potentially increasing protocol volume. This volume will generate transaction fees in THALES, which are subsequently burned.

This implementation offers multiple benefits. First, it provides additional flexibility to THALES stakers, who will continue earning THALES rewards and protocol stablecoin rewards while potentially increasing their staking positions on winning positions. Stakers remain exposed to THALES’ potential upside while being free to use part of their capital on the platform.

For the protocol, THALES won by the LP pool will deepen the pool itself and allow for deeper liquidity. Additionally when users lose, the global amount of THALES staked decreases, benefiting the remaining stakers by increasing their global share of rewards.

Also by burning THALES will decrease the total supply of THALES forever, benefiting stakers by increasing their share and consequently their staking and protocol rewards. 

By allowing users to utilize their staked THALES, we increase user engagement and provide more utility for their tokens. This added functionality encourages users to stay within the Thales Protocol, improving retention rates. This feature sets Thales apart from competitors by offering unique advantages, positioning THALES as a more attractive option for users looking to maximize their capital efficiency. This proposal aligns with the broader vision and long-term goals of the Thales ecosystem, fitting seamlessly into future developments and enhancements, and positioning Thales for sustained growth and innovation.



## Specification

**Solution proposition #1:**

This TIP entails the Thales Protocol DAO to implement a change in the THALES staking contracts that enable the following specification:

- Allow stakers to place a trade on SportsAMM V2 with their staked THALES balances by deducting their staked balance on trade execution
- The deducted balance is atomically/instantly unstaked and used as collateral against the THALES collateral pool
- If the trade is won, the claim transaction atomically restakes the win amount to the users stake balance

Benefit of this proposition is simplicity of implementation with minimal modification to the original staking contract. However, this solution entails that in case the resolution of the open trade is past the ongoing week's staking snapshot, the used staked THALES in the trade is not counted as staked and is not yielding rewards. This can have a negative UX impact for stakers that place long term trades with staked THALES.

**Solution proposition #2:**

This TIP entails the Thales Protocol DAO to implement a change in the THALES staking contracts that enable the following specification:

- Allow stakers to place a trade on SportsAMM V2 with signaling the amount of their staked THALES balance they want to use to a new proxy pool contract with liquid THALES from treasury
- Staking contract blocks withdrawal signaling of the traded amount of staked THALES while the trade is live
- A new proxy pool with liquid THALES from treasury places the trade instead of user
- If the trade is winning, the proxy pool contract claims the win and stakes the profit of the trade in behalf of user, increasing its staked balance
- If the trade is losing, the staking contract removes the traded amount from users staked balance and transfers it to the new proxy pool

Benefit of this proposition is that the used staked THALES is still yield bearing while the trade is live. The negative aspect of this solution is that it significantly increases the complexity of the staking contract. It is recommended to not entail large changes and complexities of the staking contract as it is the most important contract for the protocol.

## Implementation

## Copyright
Copyright and related rights waived via CC0.